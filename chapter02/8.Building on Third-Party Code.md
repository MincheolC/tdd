## 8장. 서드파티 코드를 기반으로 한 개발
### 8.1 소유한 타입에 대해서만 목 객체를 적용하라
#### 변경할 수 없는 타입에 대해서는 목 객체를 적용하지 말라.
서드파티 코드 변경은 (버전 업그레이드 시 패치 문제로)되도록 하지않기때문에
- 목 객체를 만들더라도 쓰임이 제한적이다. 
- "스텁이나 목 객체의 대상이 되는 행위 == 라이브러리가 실제로 수행하는 행위" 인지 보장을 할 수 없다.

#### 어댑터 계층을 작성하라
서드파티 API를 쓰는 어댑터 계층을 (가능한 얇게) 작성한 뒤 **어댑터에 목 객체를 적용**하여 테스트한다.

> 서드파티 라이브러리를 대상으로 목 객체를 적용하는 것이 도움이 되는 경우도 일부 있다.
> - 예외를 던지거나 실패했을 때 트랜잭션이 롤백되는지 확인하는 경우.( 근데 이런게 많으면 안된다!)

### 8.2 통합테스트에서 애플리케이션 객체에 목 객체를 적용하라
#### 언제? 어댑터 객체가 애플리케이션 객체로 콜백해야하는 경우

- 이벤트 기반 라이브러리는 이벤트가 발생했을 때 애플리케이션에게서 콜백 객체를 받는다.
- 애플리케이션은 이벤트 콜백을 어댑터에 제공
 -> 어댑터는 콜백을 외부라이브러리로 전달 
 -> 어댑터가 외부 이벤트를 받으면 애플리케이션 콜백에 맞게 변환

#### 어댑터가 도메인 사이에서 이벤트를 올바르게 번경하는지 검증한다.
- 애플리케이션에서 정의한 콜백 인터페이스에 목 객체를 적용
